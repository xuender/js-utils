/*! js-utils 2013-06-27 */
var arrayRemove,findArray,getId,groupBy,localStorageGet,localStorageSet,sortOn,updateArray;getId=function(a){return null==a&&(a="ID"),void 0===window[a]&&(window[a]=1),window[a]++},findArray=function(a,b,c){var d,e,f,g,h,i,j;if(Array.isArray(c)){for(f=[],g=0,i=c.length;i>g;g++)e=c[g],f.push(findArray(a,b,e));return f}for(h=0,j=a.length;j>h;h++)if(d=a[h],d[b]===c)return d;return null},updateArray=function(a,b,c){var d,e;for(d in a)e=a[d],e===b&&(a[d]=c);return a},arrayRemove=function(a,b){var c,d,e;e=[];for(c in a)d=a[c],d===b&&e.push(a.splice(c,1));return e},sortOn=function(a,b){var c;return"-"===b[0]&&(c=!0,b=b.slice(1)),a.sort(function(a,c){return a[b]<=c[b]?-1:1}),c?a.reverse():void 0},groupBy=function(a,b){var c,d,e,f,g,h;for(f=[],sortOn(a,b),d="_INVALID_GROUP_VALUE_",g=0,h=a.length;h>g;g++)e=a[g],e[b]!==d&&(c={label:e[b],items:[]},d=c.label,f.push(c)),c.items.push(e);return f},localStorageGet=function(a,b){var c;return null==b&&(b=!1),c=localStorage.getItem(a),c?JSON.parse(c):b},localStorageSet=function(a,b){return localStorage.setItem(a,JSON.stringify(b))};var I18n,syncFetch;syncFetch=function(a,b){var c;c=new XMLHttpRequest,c.open("GET",chrome.extension.getURL(a),!1),c.onreadystatechange=function(){return 4===this.readyState&&""!==this.responseText?b(this.responseText):void 0};try{return c.send()}catch(d){}},I18n=function(){function a(a){var b,c=this;this.locale=a,b="/_locales/"+this.locale+"/messages.json",syncFetch(b,function(a){return c.l10nData=JSON.parse(a)})}var b;return b=function(a,b){return a.message?a.message.replace(/\$\$/g,"$"):b},a.prototype.getMessage=function(a,c){return null==c&&(c=""),this.l10nData&&a in this.l10nData?b(this.l10nData[a],c):""},a}();